{"remainingRequest":"/home/cadic/meus-projetos/vue/knowledge/versao-inicial/frontend/node_modules/babel-loader/lib/index.js!/home/cadic/meus-projetos/vue/knowledge/versao-inicial/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/cadic/meus-projetos/vue/knowledge/versao-inicial/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cadic/meus-projetos/vue/knowledge/versao-inicial/frontend/src/components/admin/CategorieAdmin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/cadic/meus-projetos/vue/knowledge/versao-inicial/frontend/src/components/admin/CategorieAdmin.vue","mtime":1594501288852},{"path":"/home/cadic/meus-projetos/vue/knowledge/versao-inicial/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cadic/meus-projetos/vue/knowledge/versao-inicial/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/cadic/meus-projetos/vue/knowledge/versao-inicial/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cadic/meus-projetos/vue/knowledge/versao-inicial/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvY2FkaWMvbWV1cy1wcm9qZXRvcy92dWUva25vd2xlZGdlL3ZlcnNhby1pbmljaWFsL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdjYXRlZ29yeUFkbWluJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbW9kZTogJ3NhdmUnLAogICAgICBjYXRlZ29yeToge30sCiAgICAgIGNhdGVnb3JpZXM6IFtdLAogICAgICBmaWVsZHM6IFt7CiAgICAgICAga2V5OiAnaWQnLAogICAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICduYW1lJywKICAgICAgICBsYWJlbDogJ0NhdGVnb3JpYScKICAgICAgfSwgewogICAgICAgIGtleTogJ3BhdGgnLAogICAgICAgIGxhYmVsOiAnQ2FtaW5obycKICAgICAgfSwgewogICAgICAgIGtleTogJ2FjdGlvbnMnLAogICAgICAgIGxhYmVsOiAnQcOnw7VlcycKICAgICAgfV0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2FkQ2F0ZWdvcmllczogZnVuY3Rpb24gbG9hZENhdGVnb3JpZXMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgdXJsID0gImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9jYXRlZ29yaWVzIjsKICAgICAgYXhpb3MuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMuY2F0ZWdvcmllcyA9IHJlcy5kYXRhLm1hcChmdW5jdGlvbiAoY2F0ZWdvcnkpIHsKICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGNhdGVnb3J5KSwge30sIHsKICAgICAgICAgICAgdmFsdWU6IGNhdGVnb3J5LmlkLAogICAgICAgICAgICB0ZXh0OiBjYXRlZ29yeS5wYXRoCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5jYXRlZ29yaWVzKTsKICAgICAgfSk7CiAgICB9LAogICAgc2F2ZTogZnVuY3Rpb24gc2F2ZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgdXJsID0gImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9jYXRlZ29yaWVzIjsKICAgICAgdmFyIG1ldGhvZCA9IHRoaXMuY2F0ZWdvcnkuaWQgPyAncHV0JyA6ICdwb3N0JzsKICAgICAgdmFyIGlkID0gdGhpcy5jYXRlZ29yeS5pZCA/ICIvIi5jb25jYXQodGhpcy5jYXRlZ29yeS5pZCkgOiAnJzsKICAgICAgYXhpb3NbbWV0aG9kXSgiIi5jb25jYXQodXJsLCAiLyIpLmNvbmNhdChpZCksIHRoaXMuY2F0ZWdvcnkpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGFsZXJ0KCJDYXRlZ29yaWEgIi5jb25jYXQoaWQsICIgc2FsdmEgY29tIHN1Y2Vzc28hIikpOwoKICAgICAgICBfdGhpczIubG9hZENhdGVnb3JpZXMoKTsKICAgICAgfSkuY2F0Y2godGhpcy5zaG93RXJyb3IpOwogICAgfSwKICAgIGxvYWRDYXRlZ29yeTogZnVuY3Rpb24gbG9hZENhdGVnb3J5KGNhdGVnb3J5KSB7CiAgICAgIHZhciBtb2RlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnc2F2ZSc7CiAgICAgIHRoaXMubW9kZSA9IG1vZGU7CiAgICAgIHRoaXMuY2F0ZWdvcnkgPSBfb2JqZWN0U3ByZWFkKHt9LCBjYXRlZ29yeSk7CiAgICB9LAogICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICB0aGlzLm1vZGUgPSAnc2F2ZSc7CiAgICAgIHRoaXMuY2F0ZWdvcnkgPSB7fTsKICAgICAgdGhpcy5sb2FkQ2F0ZWdvcmllcygpOwogICAgfSwKICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciB1cmwgPSAiaHR0cDovL2xvY2FsaG9zdDozMDAwL2NhdGVnb3JpZXMiOwogICAgICB2YXIgaWQgPSB0aGlzLmNhdGVnb3J5LmlkOwogICAgICBheGlvcy5kZWxldGUoIiIuY29uY2F0KHVybCwgIi8iKS5jb25jYXQoaWQpKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBhbGVydCgiQ2F0ZWdvcmlhICIuY29uY2F0KGlkLCAiIHJlbW92aWRhIGNvbSBzdWNlc3NvISIpKTsKCiAgICAgICAgX3RoaXMzLmxvYWRDYXRlZ29yaWVzKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGFsZXJ0KGVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICAvLyBjYXJyZWdhIGFzIGNhdGVnb3JpYXMgYW8gaW5pY2lhciBhIHDDoWdpbmEKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5sb2FkQ2F0ZWdvcmllcygpOwogIH0KfTs="},{"version":3,"sources":["CategorieAdmin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,eADA;AAGA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,UAAA,EAAA,EAHA;AAIA,MAAA,MAAA,EAAA,CACA;AAAA,QAAA,GAAA,EAAA,IAAA;AAAA,QAAA,QAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,GAAA,EAAA,MAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAFA,EAGA;AAAA,QAAA,GAAA,EAAA,MAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAHA,EAIA;AAAA,QAAA,GAAA,EAAA,SAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAJA;AAJA,KAAA;AAWA,GAfA;AAiBA,EAAA,OAAA,EAAA;AAEA,IAAA,cAFA,4BAEA;AAAA;;AACA,UAAA,GAAA,qCAAA;AAEA,MAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,GAAA,CAAA,IAAA,CAAA,GAAA,CAAA,UAAA,QAAA,EAAA;AACA,iDAAA,QAAA;AAAA,YAAA,KAAA,EAAA,QAAA,CAAA,EAAA;AAAA,YAAA,IAAA,EAAA,QAAA,CAAA;AAAA;AACA,SAFA,CAAA;AAIA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,UAAA;AACA,OAPA;AAQA,KAbA;AAeA,IAAA,IAfA,kBAeA;AAAA;;AACA,UAAA,GAAA,qCAAA;AACA,UAAA,MAAA,GAAA,KAAA,QAAA,CAAA,EAAA,GAAA,KAAA,GAAA,MAAA;AACA,UAAA,EAAA,GAAA,KAAA,QAAA,CAAA,EAAA,cAAA,KAAA,QAAA,CAAA,EAAA,IAAA,EAAA;AAEA,MAAA,KAAA,CAAA,MAAA,CAAA,WAAA,GAAA,cAAA,EAAA,GAAA,KAAA,QAAA,EAAA,IAAA,CAAA,YAAA;AACA,QAAA,KAAA,qBAAA,EAAA,yBAAA;;AACA,QAAA,MAAA,CAAA,cAAA;AACA,OAHA,EAGA,KAHA,CAGA,KAAA,SAHA;AAIA,KAxBA;AA0BA,IAAA,YA1BA,wBA0BA,QA1BA,EA0BA;AAAA,UAAA,IAAA,uEAAA,MAAA;AACA,WAAA,IAAA,GAAA,IAAA;AACA,WAAA,QAAA,qBAAA,QAAA;AACA,KA7BA;AA+BA,IAAA,KA/BA,mBA+BA;AACA,WAAA,IAAA,GAAA,MAAA;AACA,WAAA,QAAA,GAAA,EAAA;AACA,WAAA,cAAA;AACA,KAnCA;AAqCA,IAAA,MArCA,oBAqCA;AAAA;;AACA,UAAA,GAAA,qCAAA;AACA,UAAA,EAAA,GAAA,KAAA,QAAA,CAAA,EAAA;AAEA,MAAA,KAAA,CAAA,MAAA,WAAA,GAAA,cAAA,EAAA,GAAA,IAAA,CAAA,YAAA;AACA,QAAA,KAAA,qBAAA,EAAA,4BAAA;;AACA,QAAA,MAAA,CAAA,cAAA;AACA,OAHA,EAGA,KAHA,CAGA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA;AACA,OALA;AAMA;AA/CA,GAjBA;AAqEA;AACA,EAAA,OAtEA,qBAsEA;AACA,SAAA,cAAA;AACA;AAxEA,CAAA","sourcesContent":["<template>\n    <div class=\"category-admin\">\n        <b-form>\n            <input type=\"hidden\" id=\"category_id\" v-model=\"category.id\">\n\n            <b-row>\n                <b-col md=\"12\" sm=\"12\">\n                    <b-form-group label=\"Nome\" label-for=\"category_name\">\n                        <b-form-input type=\"text\" v-model=\"category.name\" :readonly=\"mode === 'remove'\" placeholder=\"Informe o nome da categoria\" required=\"\"/>\n                    </b-form-group>\n                </b-col>\n            </b-row>\n\n            <b-row>\n                <b-col md=\"12\" sm=\"12\">\n                    <b-form-group label=\"Categoria Principal\" label-for=\"category_parentID\">\n                        <b-form-select v-if=\"mode ==='save'\" :options=\"categories\" v-model=\"category.parentID\" id=\"category_parentID\" placeholder=\"Selecione a categoria pai\" required=\"\"/>\n                        <b-form-input v-else id=\"category_parentID\" type=\"text\" v-model=\"categorie.path\"/>\n                    </b-form-group>\n                </b-col>\n            </b-row>\n\n            <b-row>\n                <b-button v-if=\"mode === 'save'\" variant=\"primary\" class=\"ml-3 mb-4\" @click=\"save()\">Salvar</b-button>\n                <b-button v-if=\"mode === 'remove'\" variant=\"danger\" class=\"ml-3 mb-4\" @click=\"remove()\">Excluir</b-button>\n                <b-button class=\"ml-3 mb-4\" @click=\"reset()\">Cancelar</b-button>\n            </b-row>       \n        </b-form>\n\n        <b-table striped hover :items=\"categories\" :fields=\"fields\">\n            <template v-slot:cell(actions)=\"data\">\n                \n                <b-button class=\"mr-2\" variant=\"warning\" @click=\"loadCategory(data.item)\">\n                    <i class=\"fa fa-pencil\"></i>\n                </b-button>                \n\n                <b-button class=\"mr-2\" variant=\"danger\" @click=\"loadCategory(data.item, 'remove')\">\n                    <i class=\"fa fa-trash\"></i>\n                </b-button>\n\n            </template>\n        </b-table>\n    </div>\n</template>\n\n<script>\n\nimport axios from 'axios'\n\nexport default {    \n    name: 'categoryAdmin',\n    \n    data: function() {\n        return {\n            mode: 'save',\n            category: {},\n            categories: [],\n            fields: [\n                {key: 'id', sortable: true},                          \n                {key: 'name', label: 'Categoria'},\n                {key: 'path', label: 'Caminho'},\n                {key: 'actions', label: 'Ações'}\n            ]\n        }\n    },\n\n    methods: {\n        \n        loadCategories() {\n            const url = `http://localhost:3000/categories`\n\n            axios.get(url)\n                .then(res => {\n                    this.categories = res.data.map(category => {\n                        return { ...category, value: category.id, text: category.path }\n                    })\n\n                    console.log(this.categories)\n            });\n        },\n\n        save() {\n            const url = `http://localhost:3000/categories`\n            const method = this.category.id ? 'put' : 'post'\n            const id = this.category.id ? `/${this.category.id}` : ''\n            \n            axios[method](`${url}/${id}`, this.category).then(() => {\n                alert(`Categoria ${id} salva com sucesso!`)                \n                this.loadCategories()\n            }).catch(this.showError)\n        },\n\n        loadCategory(category, mode='save') {\n            this.mode = mode\n            this.category = { ...category }\n        },\n\n        reset() {\n            this.mode = 'save'\n            this.category = {}\n            this.loadCategories()\n        },\n\n        remove() {\n            const url = `http://localhost:3000/categories`\n            const id = this.category.id\n\n            axios.delete(`${url}/${id}`).then(() => {\n                alert(`Categoria ${id} removida com sucesso!`)\n                this.loadCategories()\n            }).catch(error => {\n                alert(error)\n            })\n        },\n\n\n    }, \n\n    // carrega as categorias ao iniciar a página\n    mounted() {\n        this.loadCategories()\n    },\n}\n</script>\n\n<style>\n    \n</style>"],"sourceRoot":"src/components/admin"}]}