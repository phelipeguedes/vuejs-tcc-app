{"remainingRequest":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/src/components/admin/ArticleAdmin.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/src/components/admin/ArticleAdmin.vue","mtime":1594595442165},{"path":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/node_modules/css-loader/dist/cjs.js","mtime":1594595441149},{"path":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1594595442041},{"path":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/node_modules/postcss-loader/src/index.js","mtime":1594595441657},{"path":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1594595441009},{"path":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/node_modules/vue-loader/lib/index.js","mtime":1594595442041}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgp0YWJsZSB0aCwgdGQgewogICAgdGV4dC1hbGlnbjogY2VudGVyOwp9Cg=="},{"version":3,"sources":["ArticleAdmin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiKA;AACA;AACA","file":"ArticleAdmin.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n    <div class=\"article-admin\">\n        <b-form>\n            <input type=\"hidden\" v-model=\"article.id\">\n\n            <b-row>\n                <b-col md=\"12\" sm=\"12\">\n                    <b-form-group label=\"Nome\" label-for=\"article_name\">\n                        <b-form-input type=\"text\" id=\"article_name\" v-model=\"article.name\" :readonly=\"mode === 'remove'\"/>\n                    </b-form-group>\n                </b-col>\n\n                <b-col md=\"12\" sm=\"12\">\n                    <b-form-group label=\"Descrição\" label-for=\"article_description\">\n                        <b-form-input type=\"text\" id=\"article_description\" v-model=\"article.description\" :readonly=\"mode === 'remove'\"/>\n                    </b-form-group>\n                </b-col>\n\n                <b-col md=\"12\" sm=\"12\">\n                    <b-form-group label=\"Imagem (URL)\" label-for=\"article_img_url\">\n                        <b-form-input type=\"text\" id=\"article_img_url\" v-model=\"article.imgURL\" :readonly=\"mode === 'remove'\"/>\n                    </b-form-group>\n                </b-col>\n\n                <b-col md=\"12\" sm=\"12\">\n                    <b-form-group label=\"Categoria\" label-for=\"article_categoryID\">\n                        <b-form-select :options=\"categories\" v-model=\"article.categoryID\" :readonly=\"mode === 'remove'\"/>\n                    </b-form-group>\n                </b-col>\n            </b-row>\n\n            <b-row>\n                <b-col md=\"12\" sm=\"12\">\n                    <b-form-group label=\"Autor\">\n                        <b-form-select :options=\"users\" v-model=\"article.userId\" placeholder=\"Selecione o id do usuário\" required/>\n                    </b-form-group>\n                </b-col>   \n            </b-row>\n\n            <b-form-group label=\"Conteúdo\" label-for=\"article_content\">\n                <VueEditor v-model=\"article.content\" placeholder=\"Insira o conteúdo do artigo...\"></VueEditor>\n            </b-form-group>\n            \n            <b-row>\n                <b-button variant=\"primary\" v-if=\"mode === 'save'\" class=\"ml-3 mb-4\"  @click=\"save()\">Salvar</b-button>\n                <b-button variant=\"danger\" v-if=\"mode === 'remove'\" class=\"ml-3 mb-4\" @click=\"remove()\">Excluir</b-button>\n                <b-button class=\"ml-3 mb-4\" @click=\"reset()\">Cancelar</b-button>\n            </b-row>\n        \n        </b-form>\n\n        <hr>\n\n        <b-table striped hover :items=\"articles\" :fields=\"fields\">\n            <template v-slot:cell(actions)=\"data\">\n                \n                <b-button class=\"mr-2\" variant=\"warning\" @click=\"loadArticle(data.item)\">\n                    <i class=\"fa fa-pencil\"></i>\n                </b-button>\n\n                <b-button class=\"mr-2\" variant=\"danger\" @click=\"removeArticle(data.item, 'remove')\">\n                    <i class=\"fa fa-trash\"></i>\n                </b-button>\n\n            </template>\n        </b-table>\n    </div>\n</template>\n\n<script>\n\nimport axios from 'axios'\nimport { VueEditor } from 'vue2-editor'\n \nexport default {\n    name: 'ArticleAdmin',\n    components: { VueEditor },\n    data: function() {\n        return { \n            mode: 'save',\n            article: {},\n            articles: [],\n            categories: [],\n            users: [],\n            page: 1,\n            limit: 0,\n            count: 0,\n            fields: [\n                { key:'id', label:'Id', sortable:true },\n                { key:'name', label: 'Nome' },\n                { key:'description', label: 'Descrição' },\n                { key:'actions', label:'Ações' }\n            ]\n        }\n    },\n\n    methods: {\n        loadArticles() {\n            const url = `http://localhost:3000/articles`\n\n            axios.get(url).then(res => {\n                this.articles = res.data\n                console.log(res)\n                console.log(this.articles)                \n            });\n        },\n\n        save() {\n            const url = `http://localhost:3000/articles`\n            const method = this.article.id ? 'put' : 'post'\n            const id = this.article.id ? `/${this.article.id}` : ''\n\n            axios[method](`${url}/${id}`, this.article).then(() => {\n                alert('Artigo salvo com sucesso!')\n                this.loadArticles()\n            }).catch(this.showError)\n        },\n\n        loadArticle(article, mode='save') {\n            this.mode = mode\n            this.article = { ...article }\n\n            // const url = `http://localhost:3000/articles`\n            // axios.get(`${url}/${article.id}`).then(res => {\n            //     this.article = res.data\n            // })\n        },\n\n        loadCategories() {\n            const url = `http://localhost:3000/categories`\n\n            axios.get(url).then(res => {\n                this.categories = res.data.map(category => {\n                   console.log(res)\n                   return { value: category.id, text: category.name }\n                });\n            });\n        },\n\n        loadUsers() {\n            const url = `http://localhost:3000/users`\n\n            axios.get(url).then(res => {\n                this.users = res.data.map(user => {\n                    console.log(res)\n                    console.log(this.users)\n                    return { value: user.id, text: `${user.name} - ${user.email}` }\n                });\n            });\n        }\n    }, \n    mounted() {\n        this.loadArticles()\n        this.loadArticle()\n        this.loadCategories()\n        this.loadUsers()\n    },\n}\n</script>\n\n<style>\n    table th, td {\n        text-align: center;\n    }\n</style>"]}]}