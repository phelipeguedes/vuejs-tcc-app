{"remainingRequest":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/src/components/admin/CategorieAdmin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/src/components/admin/CategorieAdmin.vue","mtime":1594595442165},{"path":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1594595441009},{"path":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/node_modules/thread-loader/dist/cjs.js","mtime":1594595442001},{"path":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/node_modules/babel-loader/lib/index.js","mtime":1594595440781},{"path":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1594595441009},{"path":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/node_modules/vue-loader/lib/index.js","mtime":1594595442041}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCgpleHBvcnQgZGVmYXVsdCB7ICAgIAogICAgbmFtZTogJ2NhdGVnb3J5QWRtaW4nLAogICAgCiAgICBkYXRhOiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBtb2RlOiAnc2F2ZScsCiAgICAgICAgICAgIGNhdGVnb3J5OiB7fSwKICAgICAgICAgICAgY2F0ZWdvcmllczogW10sCiAgICAgICAgICAgIGZpZWxkczogWwogICAgICAgICAgICAgICAge2tleTogJ2lkJywgc29ydGFibGU6IHRydWV9LCAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB7a2V5OiAnbmFtZScsIGxhYmVsOiAnQ2F0ZWdvcmlhJ30sCiAgICAgICAgICAgICAgICB7a2V5OiAncGF0aCcsIGxhYmVsOiAnQ2FtaW5obyd9LAogICAgICAgICAgICAgICAge2tleTogJ2FjdGlvbnMnLCBsYWJlbDogJ0HDp8O1ZXMnfQogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfSwKCiAgICBtZXRob2RzOiB7CiAgICAgICAgCiAgICAgICAgbG9hZENhdGVnb3JpZXMoKSB7CiAgICAgICAgICAgIGNvbnN0IHVybCA9IGBodHRwOi8vbG9jYWxob3N0OjMwMDAvY2F0ZWdvcmllc2AKCiAgICAgICAgICAgIGF4aW9zLmdldCh1cmwpCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcmllcyA9IHJlcy5kYXRhLm1hcChjYXRlZ29yeSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmNhdGVnb3J5LCB2YWx1ZTogY2F0ZWdvcnkuaWQsIHRleHQ6IGNhdGVnb3J5LnBhdGggfQogICAgICAgICAgICAgICAgICAgIH0pCgogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2F0ZWdvcmllcykKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKCiAgICAgICAgc2F2ZSgpIHsKICAgICAgICAgICAgY29uc3QgdXJsID0gYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9jYXRlZ29yaWVzYAogICAgICAgICAgICBjb25zdCBtZXRob2QgPSB0aGlzLmNhdGVnb3J5LmlkID8gJ3B1dCcgOiAncG9zdCcKICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLmNhdGVnb3J5LmlkID8gYC8ke3RoaXMuY2F0ZWdvcnkuaWR9YCA6ICcnCiAgICAgICAgICAgIAogICAgICAgICAgICBheGlvc1ttZXRob2RdKGAke3VybH0vJHtpZH1gLCB0aGlzLmNhdGVnb3J5KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgIGFsZXJ0KGBDYXRlZ29yaWEgJHtpZH0gc2FsdmEgY29tIHN1Y2Vzc28hYCkgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB0aGlzLmxvYWRDYXRlZ29yaWVzKCkKICAgICAgICAgICAgfSkuY2F0Y2godGhpcy5zaG93RXJyb3IpCiAgICAgICAgfSwKCiAgICAgICAgbG9hZENhdGVnb3J5KGNhdGVnb3J5LCBtb2RlPSdzYXZlJykgewogICAgICAgICAgICB0aGlzLm1vZGUgPSBtb2RlCiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnkgPSB7IC4uLmNhdGVnb3J5IH0KICAgICAgICB9LAoKICAgICAgICByZXNldCgpIHsKICAgICAgICAgICAgdGhpcy5tb2RlID0gJ3NhdmUnCiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnkgPSB7fQogICAgICAgICAgICB0aGlzLmxvYWRDYXRlZ29yaWVzKCkKICAgICAgICB9LAoKICAgICAgICByZW1vdmUoKSB7CiAgICAgICAgICAgIGNvbnN0IHVybCA9IGBodHRwOi8vbG9jYWxob3N0OjMwMDAvY2F0ZWdvcmllc2AKICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLmNhdGVnb3J5LmlkCgogICAgICAgICAgICBheGlvcy5kZWxldGUoYCR7dXJsfS8ke2lkfWApLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgYWxlcnQoYENhdGVnb3JpYSAke2lkfSByZW1vdmlkYSBjb20gc3VjZXNzbyFgKQogICAgICAgICAgICAgICAgdGhpcy5sb2FkQ2F0ZWdvcmllcygpCiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgIGFsZXJ0KGVycm9yKQogICAgICAgICAgICB9KQogICAgICAgIH0sCgoKICAgIH0sIAoKICAgIC8vIGNhcnJlZ2EgYXMgY2F0ZWdvcmlhcyBhbyBpbmljaWFyIGEgcMOhZ2luYQogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLmxvYWRDYXRlZ29yaWVzKCkKICAgIH0sCn0K"},{"version":3,"sources":["CategorieAdmin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA","file":"CategorieAdmin.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n    <div class=\"category-admin\">\n        <b-form>\n            <input type=\"hidden\" id=\"category_id\" v-model=\"category.id\">\n\n            <b-row>\n                <b-col md=\"12\" sm=\"12\">\n                    <b-form-group label=\"Nome\" label-for=\"category_name\">\n                        <b-form-input type=\"text\" v-model=\"category.name\" :readonly=\"mode === 'remove'\" placeholder=\"Informe o nome da categoria\" required=\"\"/>\n                    </b-form-group>\n                </b-col>\n            </b-row>\n\n            <b-row>\n                <b-col md=\"12\" sm=\"12\">\n                    <b-form-group label=\"Categoria Principal\" label-for=\"category_parentID\">\n                        <b-form-select v-if=\"mode ==='save'\" :options=\"categories\" v-model=\"category.parentID\" id=\"category_parentID\" placeholder=\"Selecione a categoria pai\" required=\"\"/>\n                        <b-form-input v-else id=\"category_parentID\" type=\"text\" v-model=\"categorie.path\" readonly/>\n                    </b-form-group>\n                </b-col>\n            </b-row>\n\n            <b-row>\n                <b-button v-if=\"mode === 'save'\" variant=\"primary\" class=\"ml-3 mb-4\" @click=\"save()\">Salvar</b-button>\n                <b-button v-if=\"mode === 'remove'\" variant=\"danger\" class=\"ml-3 mb-4\" @click=\"remove()\">Excluir</b-button>\n                <b-button class=\"ml-3 mb-4\" @click=\"reset()\">Cancelar</b-button>\n            </b-row>       \n        </b-form>\n\n        <b-table striped hover :items=\"categories\" :fields=\"fields\">\n            <template v-slot:cell(actions)=\"data\">\n                \n                <b-button class=\"mr-2\" variant=\"warning\" @click=\"loadCategory(data.item)\">\n                    <i class=\"fa fa-pencil\"></i>\n                </b-button>                \n\n                <b-button class=\"mr-2\" variant=\"danger\" @click=\"loadCategory(data.item, 'remove')\">\n                    <i class=\"fa fa-trash\"></i>\n                </b-button>\n\n            </template>\n        </b-table>\n    </div>\n</template>\n\n<script>\n\nimport axios from 'axios'\n\nexport default {    \n    name: 'categoryAdmin',\n    \n    data: function() {\n        return {\n            mode: 'save',\n            category: {},\n            categories: [],\n            fields: [\n                {key: 'id', sortable: true},                          \n                {key: 'name', label: 'Categoria'},\n                {key: 'path', label: 'Caminho'},\n                {key: 'actions', label: 'Ações'}\n            ]\n        }\n    },\n\n    methods: {\n        \n        loadCategories() {\n            const url = `http://localhost:3000/categories`\n\n            axios.get(url)\n                .then(res => {\n                    this.categories = res.data.map(category => {\n                        return { ...category, value: category.id, text: category.path }\n                    })\n\n                    console.log(this.categories)\n            });\n        },\n\n        save() {\n            const url = `http://localhost:3000/categories`\n            const method = this.category.id ? 'put' : 'post'\n            const id = this.category.id ? `/${this.category.id}` : ''\n            \n            axios[method](`${url}/${id}`, this.category).then(() => {\n                alert(`Categoria ${id} salva com sucesso!`)                \n                this.loadCategories()\n            }).catch(this.showError)\n        },\n\n        loadCategory(category, mode='save') {\n            this.mode = mode\n            this.category = { ...category }\n        },\n\n        reset() {\n            this.mode = 'save'\n            this.category = {}\n            this.loadCategories()\n        },\n\n        remove() {\n            const url = `http://localhost:3000/categories`\n            const id = this.category.id\n\n            axios.delete(`${url}/${id}`).then(() => {\n                alert(`Categoria ${id} removida com sucesso!`)\n                this.loadCategories()\n            }).catch(error => {\n                alert(error)\n            })\n        },\n\n\n    }, \n\n    // carrega as categorias ao iniciar a página\n    mounted() {\n        this.loadCategories()\n    },\n}\n</script>\n\n<style>\n    \n</style>"]}]}