{"remainingRequest":"/home/phelipe/projetos/vuejs/tcc-app-vuejs/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/phelipe/projetos/vuejs/tcc-app-vuejs/frontend/src/components/aluno/Aluno.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/phelipe/projetos/vuejs/tcc-app-vuejs/frontend/src/components/aluno/Aluno.vue","mtime":1595566580994},{"path":"/home/phelipe/projetos/vuejs/tcc-app-vuejs/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1594595441009},{"path":"/home/phelipe/projetos/vuejs/tcc-app-vuejs/frontend/node_modules/babel-loader/lib/index.js","mtime":1594595440781},{"path":"/home/phelipe/projetos/vuejs/tcc-app-vuejs/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1594595441009},{"path":"/home/phelipe/projetos/vuejs/tcc-app-vuejs/frontend/node_modules/vue-loader/lib/index.js","mtime":1594595442041}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgUGFnZVRpdGxlIGZyb20gIi4uL3RlbXBsYXRlcy9QYWdlVGl0bGUiCmltcG9ydCB7IGFwaUJhc2VVUkwgfSBmcm9tICJAL2dsb2JhbCI7IC8vIHVybCBkYSBhcGkgZGUgYWx1bm9zCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnYWx1bm8nLAogICAgY29tcG9uZW50czogeyBQYWdlVGl0bGUgfSwKICAgIAogICAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbW9kZTogJ3NhdmUnLAogICAgICAgICAgICBhbHVubzoge30sCiAgICAgICAgICAgIGFsdW5vczogW10sCiAgICAgICAgICAgIGZpZWxkczogWwogICAgICAgICAgICAgICAge2tleTogJ2lkJywgbGFiZWw6ICdJZCcsIHNvcnRhYmxlOiB0cnVlfSwKICAgICAgICAgICAgICAgIHtrZXk6ICdub21lJywgbGFiZWw6ICdOYW1lJywgc29ydGFibGU6IHRydWV9LAogICAgICAgICAgICAgICAge2tleTogJ21hdHJpY3VsYScsIGxhYmVsOiAnTWF0csOtY3VsYSd9LAogICAgICAgICAgICAgICAge2tleTogJ2N1cnNvJywgbGFiZWw6ICdDdXJzbyd9LAogICAgICAgICAgICAgICAge2tleTogJ2VtYWlsJywgbGFiZWw6ICdFbWFpbCd9LAogICAgICAgICAgICAgICAge2tleTogJ2FjdGlvbnMnLCBsYWJlbDogJ0HDp8O1ZXMnfQogICAgICAgICAgICBdCiAgICAgICAgfQogICAgfSwKCiAgICBtZXRob2RzOiB7CgogICAgICAgIC8vIGxpc3RhIHRvZG9zIG9zIGFsdW5vcwogICAgICAgIHJlYWQoKSB7ICAKICAgICAgICAgICAgY29uc3QgdXJsID0gYCR7YXBpQmFzZVVSTH0vYWx1bm9zYDsKCiAgICAgICAgICAgIGF4aW9zLmdldCh1cmwpCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuYWx1bm9zID0gcmVzLmRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKCiAgICAgICAgLy8gY3JpYSBvdSBhdHVhbGl6YSB1bSBhbHVubwogICAgICAgIHNhdmUoKSB7CiAgICAgICAgICAgIGNvbnN0IHVybCA9IGAke2FwaUJhc2VVUkx9YDsgCiAgICAgICAgICAgIGNvbnN0IG1ldGhvZCA9IHRoaXMuYWx1bm8uaWQgPyAncHV0JyA6ICdwb3N0JyAvLyBzZSBvIGlkIG7Do28gZm9yIHBhc3NhZG8sIHRyYXRhLXNlIGRlIHVtIGluc2VydCAocG9zdCksIHNlbsOjbyDDqSB1bSB1cGRhdGUgKHB1dCkKICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLmFsdW5vLmlkID8gYC8ke3RoaXMuYWx1bm8uaWR9YCA6ICcnCiAgICAgICAgICAgIAogICAgICAgICAgICBheGlvc1ttZXRob2RdKGAke3VybH0vYWx1bm9zLyR7aWR9YCwgdGhpcy5hbHVubykKICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRvYXN0ZWQuZ2xvYmFsLnNob3dTdWNjZXNzKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICAgICAgICAgICAgICAgIHRoaXMucmVhZCgpOwogICAgICAgICAgICAgICAgfSkuY2F0Y2godGhpcy5zaG93RXJyb3IpCiAgICAgICAgfSwKCiAgICAgICAgLy8gY2FycmVnYSB1bSDDum5pY28gYWx1bm8KICAgICAgICBsb2FkQWx1bm8oYWx1bm8sIG1vZGU9J3NhdmUnKSB7CiAgICAgICAgICAgIHRoaXMubW9kZSA9IG1vZGU7CiAgICAgICAgICAgIC8vIGNvcGlhbmRvIG9zIHZhbG9yZXMgZGUgdGhpcy5hbHVubyBwLyBhbHVubwogICAgICAgICAgICB0aGlzLmFsdW5vID0geyAuLi5hbHVubyB9OwogICAgICAgIH0sCgogICAgICAgIC8vIGV4Y2x1aSB1bSBhbHVubwogICAgICAgIHJlbW92ZSgpIHsKICAgICAgICAgICAgY29uc3QgdXJsID0gYCR7YXBpQmFzZVVSTH1gOwogICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMuYWx1bm8uaWQ7CiAgICAgICAgICAgIAogICAgICAgICAgICBheGlvcy5kZWxldGUoYCR7dXJsfS9hbHVub3MvJHtpZH1gKQogICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgIC8vdGhpcy5sb2FkQWx1bm9zKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICAgICAgICAgICAgfSkuY2F0Y2godGhpcy5zaG93RXJyb3IpOwogICAgICAgIH0sCgogICAgICAgIC8vIHJlaW5pY2lhIG9zIHZhbG9yZXMgZG9zIGNhbXBvcyBlIG8gb2JqZXRvIGFsdW5vCiAgICAgICAgcmVzZXQoKSB7CiAgICAgICAgICAgIHRoaXMubW9kZSA9ICdzYXZlJzsKICAgICAgICAgICAgdGhpcy5hbHVubyA9IHt9OwogICAgICAgICAgICB0aGlzLmxvYWRBbHVub3MoKTsKICAgICAgICB9LAoKICAgICAgICBzaG93RXJyb3IoKSB7CiAgICAgICAgICAgIHJldHVybiBhbGVydCgnRXJybyEnKTsKICAgICAgICB9CgogICAgfSwKCiAgICAvLyBhbyBjYXJyZWdhciBhIHDDoWdpbmEsIGNoYW1hIGEgZnVuw6fDo28gcXVlIGNvbnTDqW0gYSBsaXN0YSBkZSBhbHVub3MKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy5yZWFkKCk7CiAgICB9LAp9Cg=="},{"version":3,"sources":["Aluno.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA","file":"Aluno.vue","sourceRoot":"src/components/aluno","sourcesContent":["<template>\n    <div class=\"aluno-page\">\n        <PageTitle icon=\"fa fa-users\" main=\"Alunos\" subTitle=\"Cadastro de alunos\"></PageTitle>\n\n        <div class=\"alunos-page-tab\">\n            <b-card no-body>\n                <b-tabs card>\n                    <b-tab title=\"Alunos\" active>\n                        \n                        <b-form>\n                            <input type=\"hidden\" v-model=\"aluno.id\" id=\"aluno_id\">\n                \n                            <b-row>\n                                <b-col md=\"6\" sm=\"12\">\n                                    <b-form-group label=\"Nome\" label-for=\"aluno_name\">\n                                        <b-form-input :readonly=\"mode === 'remove'\" id=\"aluno_name\" type=\"text\" v-model=\"aluno.nome\" placeholder=\"Nome do aluno(a)\" required />                    \n                                    </b-form-group>\n                                </b-col>\n\n                                <b-col md=\"6\" sm=\"12\">\n                                    <b-form-group label=\"Matrícula\" label-for=\"matricula\">\n                                        <b-form-input :readonly=\"mode === 'remove'\" id=\"matricula\" type=\"number\" v-model=\"aluno.matricula\" placeholder=\"Matrícula do aluno(a)\" required />\n                                    </b-form-group>\n                                </b-col>                           \n                            </b-row>\n\n                            <b-row>\n                                <b-col md=\"6\" sm=\"12\">\n                                    <b-form-group label=\"Curso\" label-for=\"curso\">\n                                        <b-form-input :readonly=\"mode === 'remove'\" id=\"text\" type=\"text\" v-model=\"aluno.curso\" placeholder=\"Curso do aluno(a)\" required />\n                                    </b-form-group>\n                                </b-col>\n\n                                <b-col md=\"6\" sm=\"12\">\n                                    <b-form-group label=\"Email\" label-for=\"email\">\n                                        <b-form-input :readonly=\"mode === 'remove'\" id=\"email\" type=\"email\" v-model=\"aluno.email\" placeholder=\"Email do aluno(a)\" required />                    \n                                    </b-form-group>\n                                </b-col> \n                            </b-row>\n\n                            <b-row>\n                                <b-button variant=\"primary\" class=\"ml-3 mb-4\" v-if=\"mode === 'save'\" @click=\"save()\">Salvar</b-button>\n                                <b-button variant=\"danger\" class=\"ml-3 mb-4\" v-if=\"mode === 'remove'\" @click=\"remove()\">Excluir</b-button>\n                                <b-button class=\"ml-3 mb-4\" @click=\"reset()\">Cancelar</b-button>\n                            </b-row>\n\n                            <b-table striped hover :items=\"alunos\" :fields=\"fields\">\n                                <template v-slot:cell(actions)=\"data\">\n                                    \n                                    <b-button class=\"mr-2\" variant=\"warning\" @click=\"loadAluno(data.item)\">\n                                        <i class=\"fa fa-pencil\"></i> \n                                    </b-button>\n                                    \n                                    <b-button class=\"mr-2\" variant=\"danger\" @click=\"loadAluno(data.item, 'remove')\">\n                                        <i class=\"fa fa-trash\"></i>\n                                    </b-button>\n\n                                </template>\n                            </b-table>\n\n                        </b-form>\n\n                    </b-tab>\n                </b-tabs>\n            </b-card>\n        </div>\n        \n    </div>\n</template>\n\n<script>\n\nimport PageTitle from \"../templates/PageTitle\"\nimport { apiBaseURL } from \"@/global\"; // url da api de alunos\nimport axios from 'axios';\n\nexport default {\n    name: 'aluno',\n    components: { PageTitle },\n    \n    data: function() {\n        return {\n            mode: 'save',\n            aluno: {},\n            alunos: [],\n            fields: [\n                {key: 'id', label: 'Id', sortable: true},\n                {key: 'nome', label: 'Name', sortable: true},\n                {key: 'matricula', label: 'Matrícula'},\n                {key: 'curso', label: 'Curso'},\n                {key: 'email', label: 'Email'},\n                {key: 'actions', label: 'Ações'}\n            ]\n        }\n    },\n\n    methods: {\n\n        // lista todos os alunos\n        read() {  \n            const url = `${apiBaseURL}/alunos`;\n\n            axios.get(url)\n                .then(res => {\n                    this.alunos = res.data\n            });\n        },\n\n        // cria ou atualiza um aluno\n        save() {\n            const url = `${apiBaseURL}`; \n            const method = this.aluno.id ? 'put' : 'post' // se o id não for passado, trata-se de um insert (post), senão é um update (put)\n            const id = this.aluno.id ? `/${this.aluno.id}` : ''\n            \n            axios[method](`${url}/alunos/${id}`, this.aluno)\n                .then(() => {\n                    this.toasted.global.showSuccess();\n                    this.reset();\n                    this.read();\n                }).catch(this.showError)\n        },\n\n        // carrega um único aluno\n        loadAluno(aluno, mode='save') {\n            this.mode = mode;\n            // copiando os valores de this.aluno p/ aluno\n            this.aluno = { ...aluno };\n        },\n\n        // exclui um aluno\n        remove() {\n            const url = `${apiBaseURL}`;\n            const id = this.aluno.id;\n            \n            axios.delete(`${url}/alunos/${id}`)\n                .then(() => {\n                    //this.loadAlunos();\n                    this.reset();\n                }).catch(this.showError);\n        },\n\n        // reinicia os valores dos campos e o objeto aluno\n        reset() {\n            this.mode = 'save';\n            this.aluno = {};\n            this.loadAlunos();\n        },\n\n        showError() {\n            return alert('Erro!');\n        }\n\n    },\n\n    // ao carregar a página, chama a função que contém a lista de alunos\n    mounted() {\n        this.read();\n    },\n}\n</script>\n\n<style>\n    \n</style>"]}]}