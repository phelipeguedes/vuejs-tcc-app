{"remainingRequest":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/src/components/admin/ArticleAdmin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/src/components/admin/ArticleAdmin.vue","mtime":1594595442165},{"path":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1594595441009},{"path":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/node_modules/thread-loader/dist/cjs.js","mtime":1594595442001},{"path":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/node_modules/babel-loader/lib/index.js","mtime":1594595440781},{"path":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1594595441009},{"path":"/home/phelipe/projetos/vuejs/knowledge/versao-inicial/frontend/node_modules/vue-loader/lib/index.js","mtime":1594595442041}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCmltcG9ydCB7IFZ1ZUVkaXRvciB9IGZyb20gJ3Z1ZTItZWRpdG9yJwogCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdBcnRpY2xlQWRtaW4nLAogICAgY29tcG9uZW50czogeyBWdWVFZGl0b3IgfSwKICAgIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB7IAogICAgICAgICAgICBtb2RlOiAnc2F2ZScsCiAgICAgICAgICAgIGFydGljbGU6IHt9LAogICAgICAgICAgICBhcnRpY2xlczogW10sCiAgICAgICAgICAgIGNhdGVnb3JpZXM6IFtdLAogICAgICAgICAgICB1c2VyczogW10sCiAgICAgICAgICAgIHBhZ2U6IDEsCiAgICAgICAgICAgIGxpbWl0OiAwLAogICAgICAgICAgICBjb3VudDogMCwKICAgICAgICAgICAgZmllbGRzOiBbCiAgICAgICAgICAgICAgICB7IGtleTonaWQnLCBsYWJlbDonSWQnLCBzb3J0YWJsZTp0cnVlIH0sCiAgICAgICAgICAgICAgICB7IGtleTonbmFtZScsIGxhYmVsOiAnTm9tZScgfSwKICAgICAgICAgICAgICAgIHsga2V5OidkZXNjcmlwdGlvbicsIGxhYmVsOiAnRGVzY3Jpw6fDo28nIH0sCiAgICAgICAgICAgICAgICB7IGtleTonYWN0aW9ucycsIGxhYmVsOidBw6fDtWVzJyB9CiAgICAgICAgICAgIF0KICAgICAgICB9CiAgICB9LAoKICAgIG1ldGhvZHM6IHsKICAgICAgICBsb2FkQXJ0aWNsZXMoKSB7CiAgICAgICAgICAgIGNvbnN0IHVybCA9IGBodHRwOi8vbG9jYWxob3N0OjMwMDAvYXJ0aWNsZXNgCgogICAgICAgICAgICBheGlvcy5nZXQodXJsKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmFydGljbGVzID0gcmVzLmRhdGEKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuYXJ0aWNsZXMpICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9KTsKICAgICAgICB9LAoKICAgICAgICBzYXZlKCkgewogICAgICAgICAgICBjb25zdCB1cmwgPSBgaHR0cDovL2xvY2FsaG9zdDozMDAwL2FydGljbGVzYAogICAgICAgICAgICBjb25zdCBtZXRob2QgPSB0aGlzLmFydGljbGUuaWQgPyAncHV0JyA6ICdwb3N0JwogICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMuYXJ0aWNsZS5pZCA/IGAvJHt0aGlzLmFydGljbGUuaWR9YCA6ICcnCgogICAgICAgICAgICBheGlvc1ttZXRob2RdKGAke3VybH0vJHtpZH1gLCB0aGlzLmFydGljbGUpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgYWxlcnQoJ0FydGlnbyBzYWx2byBjb20gc3VjZXNzbyEnKQogICAgICAgICAgICAgICAgdGhpcy5sb2FkQXJ0aWNsZXMoKQogICAgICAgICAgICB9KS5jYXRjaCh0aGlzLnNob3dFcnJvcikKICAgICAgICB9LAoKICAgICAgICBsb2FkQXJ0aWNsZShhcnRpY2xlLCBtb2RlPSdzYXZlJykgewogICAgICAgICAgICB0aGlzLm1vZGUgPSBtb2RlCiAgICAgICAgICAgIHRoaXMuYXJ0aWNsZSA9IHsgLi4uYXJ0aWNsZSB9CgogICAgICAgICAgICAvLyBjb25zdCB1cmwgPSBgaHR0cDovL2xvY2FsaG9zdDozMDAwL2FydGljbGVzYAogICAgICAgICAgICAvLyBheGlvcy5nZXQoYCR7dXJsfS8ke2FydGljbGUuaWR9YCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAvLyAgICAgdGhpcy5hcnRpY2xlID0gcmVzLmRhdGEKICAgICAgICAgICAgLy8gfSkKICAgICAgICB9LAoKICAgICAgICBsb2FkQ2F0ZWdvcmllcygpIHsKICAgICAgICAgICAgY29uc3QgdXJsID0gYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9jYXRlZ29yaWVzYAoKICAgICAgICAgICAgYXhpb3MuZ2V0KHVybCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yaWVzID0gcmVzLmRhdGEubWFwKGNhdGVnb3J5ID0+IHsKICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBjYXRlZ29yeS5pZCwgdGV4dDogY2F0ZWdvcnkubmFtZSB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKCiAgICAgICAgbG9hZFVzZXJzKCkgewogICAgICAgICAgICBjb25zdCB1cmwgPSBgaHR0cDovL2xvY2FsaG9zdDozMDAwL3VzZXJzYAoKICAgICAgICAgICAgYXhpb3MuZ2V0KHVybCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgdGhpcy51c2VycyA9IHJlcy5kYXRhLm1hcCh1c2VyID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy51c2VycykKICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdXNlci5pZCwgdGV4dDogYCR7dXNlci5uYW1lfSAtICR7dXNlci5lbWFpbH1gIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9LCAKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy5sb2FkQXJ0aWNsZXMoKQogICAgICAgIHRoaXMubG9hZEFydGljbGUoKQogICAgICAgIHRoaXMubG9hZENhdGVnb3JpZXMoKQogICAgICAgIHRoaXMubG9hZFVzZXJzKCkKICAgIH0sCn0K"},{"version":3,"sources":["ArticleAdmin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ArticleAdmin.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n    <div class=\"article-admin\">\n        <b-form>\n            <input type=\"hidden\" v-model=\"article.id\">\n\n            <b-row>\n                <b-col md=\"12\" sm=\"12\">\n                    <b-form-group label=\"Nome\" label-for=\"article_name\">\n                        <b-form-input type=\"text\" id=\"article_name\" v-model=\"article.name\" :readonly=\"mode === 'remove'\"/>\n                    </b-form-group>\n                </b-col>\n\n                <b-col md=\"12\" sm=\"12\">\n                    <b-form-group label=\"Descrição\" label-for=\"article_description\">\n                        <b-form-input type=\"text\" id=\"article_description\" v-model=\"article.description\" :readonly=\"mode === 'remove'\"/>\n                    </b-form-group>\n                </b-col>\n\n                <b-col md=\"12\" sm=\"12\">\n                    <b-form-group label=\"Imagem (URL)\" label-for=\"article_img_url\">\n                        <b-form-input type=\"text\" id=\"article_img_url\" v-model=\"article.imgURL\" :readonly=\"mode === 'remove'\"/>\n                    </b-form-group>\n                </b-col>\n\n                <b-col md=\"12\" sm=\"12\">\n                    <b-form-group label=\"Categoria\" label-for=\"article_categoryID\">\n                        <b-form-select :options=\"categories\" v-model=\"article.categoryID\" :readonly=\"mode === 'remove'\"/>\n                    </b-form-group>\n                </b-col>\n            </b-row>\n\n            <b-row>\n                <b-col md=\"12\" sm=\"12\">\n                    <b-form-group label=\"Autor\">\n                        <b-form-select :options=\"users\" v-model=\"article.userId\" placeholder=\"Selecione o id do usuário\" required/>\n                    </b-form-group>\n                </b-col>   \n            </b-row>\n\n            <b-form-group label=\"Conteúdo\" label-for=\"article_content\">\n                <VueEditor v-model=\"article.content\" placeholder=\"Insira o conteúdo do artigo...\"></VueEditor>\n            </b-form-group>\n            \n            <b-row>\n                <b-button variant=\"primary\" v-if=\"mode === 'save'\" class=\"ml-3 mb-4\"  @click=\"save()\">Salvar</b-button>\n                <b-button variant=\"danger\" v-if=\"mode === 'remove'\" class=\"ml-3 mb-4\" @click=\"remove()\">Excluir</b-button>\n                <b-button class=\"ml-3 mb-4\" @click=\"reset()\">Cancelar</b-button>\n            </b-row>\n        \n        </b-form>\n\n        <hr>\n\n        <b-table striped hover :items=\"articles\" :fields=\"fields\">\n            <template v-slot:cell(actions)=\"data\">\n                \n                <b-button class=\"mr-2\" variant=\"warning\" @click=\"loadArticle(data.item)\">\n                    <i class=\"fa fa-pencil\"></i>\n                </b-button>\n\n                <b-button class=\"mr-2\" variant=\"danger\" @click=\"removeArticle(data.item, 'remove')\">\n                    <i class=\"fa fa-trash\"></i>\n                </b-button>\n\n            </template>\n        </b-table>\n    </div>\n</template>\n\n<script>\n\nimport axios from 'axios'\nimport { VueEditor } from 'vue2-editor'\n \nexport default {\n    name: 'ArticleAdmin',\n    components: { VueEditor },\n    data: function() {\n        return { \n            mode: 'save',\n            article: {},\n            articles: [],\n            categories: [],\n            users: [],\n            page: 1,\n            limit: 0,\n            count: 0,\n            fields: [\n                { key:'id', label:'Id', sortable:true },\n                { key:'name', label: 'Nome' },\n                { key:'description', label: 'Descrição' },\n                { key:'actions', label:'Ações' }\n            ]\n        }\n    },\n\n    methods: {\n        loadArticles() {\n            const url = `http://localhost:3000/articles`\n\n            axios.get(url).then(res => {\n                this.articles = res.data\n                console.log(res)\n                console.log(this.articles)                \n            });\n        },\n\n        save() {\n            const url = `http://localhost:3000/articles`\n            const method = this.article.id ? 'put' : 'post'\n            const id = this.article.id ? `/${this.article.id}` : ''\n\n            axios[method](`${url}/${id}`, this.article).then(() => {\n                alert('Artigo salvo com sucesso!')\n                this.loadArticles()\n            }).catch(this.showError)\n        },\n\n        loadArticle(article, mode='save') {\n            this.mode = mode\n            this.article = { ...article }\n\n            // const url = `http://localhost:3000/articles`\n            // axios.get(`${url}/${article.id}`).then(res => {\n            //     this.article = res.data\n            // })\n        },\n\n        loadCategories() {\n            const url = `http://localhost:3000/categories`\n\n            axios.get(url).then(res => {\n                this.categories = res.data.map(category => {\n                   console.log(res)\n                   return { value: category.id, text: category.name }\n                });\n            });\n        },\n\n        loadUsers() {\n            const url = `http://localhost:3000/users`\n\n            axios.get(url).then(res => {\n                this.users = res.data.map(user => {\n                    console.log(res)\n                    console.log(this.users)\n                    return { value: user.id, text: `${user.name} - ${user.email}` }\n                });\n            });\n        }\n    }, \n    mounted() {\n        this.loadArticles()\n        this.loadArticle()\n        this.loadCategories()\n        this.loadUsers()\n    },\n}\n</script>\n\n<style>\n    table th, td {\n        text-align: center;\n    }\n</style>"]}]}